# Заметки
1) wireplumber настройки как переключать выходы
2) кастомизация qtile bar
3) обои рабочего стола с подсказками (qtile, kitty, wpa_cli, bluetoothctl, wpctl)
4) zsh
5) nvim
6) apps on startup
7) startup qtile
8) login manager ly?
9) volume in bar

/etc/hostname - our hostname
apt-get update && apt-get dist-upgrade

apt-get install update-kernel
update-kernel -i (with drm-noveu)

apt-get install python3 # python3-tools

apt-get install firmware-linux  # for correct wifi working
apt-get install wpa_supplicant systemd-timesyncd  # work with wifi
apt-get install rfkill

rfkill unblock wifi bluetooth
modprobe iwlwifi hidp i915

## wifi ##

/etc/wpa_supplicant/wpa_supplicant.conf
ctrl_interface=/run/wpa_supplicant
update_config=1

wpa_supplicant -B -i interface -c /etc/wpa_supplicant/wpa_supplicant.conf
wpa_cli
>scan
>scan_results
>add_network
>set_network 0 ssid "SSID"
>set_ntework psk "passphrase"
>enable_network 0
>save_config
dhcpcd interface

##
/etc/systemd/network/wifi.network
[Match]
Name=w*

[Link]
RequiredForOnline=routable

[Network]
DHCP=ipv4

[DHCPv4]
UseDNS=yes
UseDomains=yes

/etc/systemd/network/lan.network
[Match]
Name=e*

[Link]
RequiredForOnline=routable

[Network]
DHCP=ipv4

[DHCPv4]
UseDNS=yes
UseDomains=yes


/etc/wpa_supplicant/wpa_supplicant-interface.conf
ctrl_interface=/run/wpa_supplicant
ctrl_interface_group=wheel
eapol_version=2
fast_reauth=1

wpa_passphrase "SSID" "pass" >> /etc/wpa_supplicant/wpa_supplicant-interface.conf

# if we use several networks then we have to watch /etc/resolv.conf

systemctl enable wpa_supplicant@interface.service
systemctl start wpa_supplicant@interface.service

in future need to add wpa_cli action script or integrate into qtile

we need scripts for wpa_supplicant as systemd unit work with priority -> we dont need this because wpa_cli enough
wpa_cli reconfigure
wpa_cli select_network
wpa_cli reconnect
wpa_cli -a file # for notify-send

####

## systemd-resolved ##

systemctl enbale --now systemd-resolved
ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf

####

## bluetooth ##

apt-get install bluez bluez-tools

hciconfig up hci0
systemctl start bluetooth
systemctl enable bluetooth
bluetooth
>power on
>scan on
>devices
>pair MAC
>trust MAC
>connect MAC

####

## qtile + wayland ##

https://www.altlinux.org/%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B_RPM
https://www.altlinux.org/Sudo
https://www.altlinux.org/Control
https://www.altlinux.org/Udev

apt-get install gcc zsh seatd libwlroots12 xorg-xwayland
apt-get install git wget curl openssh-common qtile kitty
apt-get install zip unzip
systemctl start/enable seatd
groupadd seat xgrp
usermod -aG seat xgrp wheel video audio
export XDG_RUNTIME_DIR=/run/user/$(id -u)
vi /etc/udev/rules.d/99-dri.rules
KERNEL=="card*", SUBSYSTEM=="drm", GROUP="video", MODE="0660"
udevadm control --reload
udevadm trigger

from libqtile.backend.wayland import InputConfig
wl_input_rules = {
    "type:keyboard": InputConfig(
        kb_layout="us,ru", kb_options="grp:caps_toggle",
    ),
}

timedatectl set-timezone "Europe/Moscow"
apt-get install chromium-gost pipewire wireplumber alsa-utils firmware-alsa-sof btop
systemctl --user enable --now pipewire{,-pulse}.socket wireplumber

